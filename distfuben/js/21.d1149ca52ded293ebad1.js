webpackJsonp([21],{H3bK:function(t,e){},Jcjs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("woOf"),i=a.n(s),n=a("mvHQ"),l=a.n(n),r=a("Xxa5"),c=a.n(r),d=a("exGp"),o=a.n(d),_=a("iqGf"),h={components:{videoPlayer:_.videoPlayer},data:function(){return{cross_name:"",car_sta:"",cameraIndex:0,t_active:!1,playerOptions:{width:"960",sources:[{type:"rtmp/mp4",src:"rtmp://192.168.245.37:1935/mylive/test1"}],aspectRatio:"16:9",techOrder:["flash"],autoplay:!0,flash:{swf:"static/video-js.swf"},controls:!1},x:0,y:0,x_draw:5,cameraList:[],btn_sta:{draw_btn:"",line:"none",car:"none",generate:!0,canvas:"default",gen_drive:!0,can_div:"",x_red:""},span_bimg:!1,tip_msg:!1,storage_data:{},is_null:{car_line:!1,car_line_del:!1,car_line_name:!1,car:!1,car_name:!1,test:!1,test_name:!1,test_del:!1,people_walk:""},detail:{},send_data:{},lane_list:[],car_data:[],exam_list:[],activeName:"first",car_area:{},last_arr:[],editFormVisible:!1,edit_data:{},type_options:[{value:1,label:"正向"},{value:2,label:"背向"}],options:[],selected_item:"",peopleLineName:"人行道配置",area_data:{},people_dots:[],render_data:[],walk_list:[],walk_area:"",isReady:!1}},watch:{lane_list:function(t,e){t.length<=0?(this.is_null.car_line=!1,this.is_null.car=!1,this.is_null.test=!1,this.is_null.test_name=!1,this.is_null.test_del=!1):(this.is_null.car_line=!0,this.is_null.car_line_del=!0,this.is_null.car_line_name=!0)},car_data:function(t,e){t.length<=0?(this.is_null.car=!1,this.is_null.car_name=!1,this.is_null.test=!1,this.is_null.test_name=!1,this.is_null.test_del=!1,this.lane_list.length>=2?this.btn_sta.gen_drive=!1:this.btn_sta.gen_drive=!0):(this.is_null.car=!0,this.is_null.car_name=!0)},exam_list:function(t,e){t.length<=0?(this.is_null.test=!1,this.is_null.test_name=!1,this.is_null.test_del=!1):(this.is_null.test=!0,this.is_null.test_name=!0,this.is_null.test_del=!0)},walk_list:function(t,e){t.length<=0&&(this.is_null.people_walk=!1)}},mounted:function(){this.init(),this.can_init()},created:function(){},methods:{onPlayerPlay:function(t){!0===t.isReady_&&(this.isReady=t.isReady_,this.cameraList[this.cameraIndex].direct_type<5?this.data_inital(this.cameraList[this.cameraIndex].id):(this.ctx.clearRect(0,0,this.c.width,this.c.height),this.sidewalklist()))},del_ico:function(t,e){this.dellaneline(t,e)},indexMethod:function(t){return t},font_style:function(t){t.row,t.rowIndex;return"sta_fontcenter"},can_init:function(){this.c=document.getElementById("canvas"),this.ctx=this.c.getContext("2d")},init:function(){var t=this;this.$http({methods:"get",url:"phaselist/"}).then(function(e){if(200===e.code){var a=e.data.camera_list;if(t.cameraList=a,t.cameraList.length>0){for(var s=0;s<t.cameraList.length;s++)""===t.cameraList[s].id&&(t.cameraList.splice(s,1),s-=1);t.handel_name(t.cameraList)}}else t.$message({message:"网络错误",type:"warning"})})},camdetail:function(t,e,a){var s=this;return o()(c.a.mark(function i(){var n,l,r;return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s.x_draw=5,s.car_data=[],s.lane_list=[],s.cameraIndex!==a&&(s.isReady=!1,s.cameraIndex=a),s.clear_canvas(),s.t_active=!0,i.next=8,s.$http.get("crossroadinfo/");case 8:return 200===(n=i.sent).code&&(s.cross_name=n.data.road_base_info.cross_name),i.next=12,s.$http({methods:"get",url:"camerainfo/"+t+"/"});case 12:if(200===(l=i.sent).code){for(s.btn_sta.generate=!1,s.send_data.camera_id=t,s.detail=l.data,r=0;r<s.cameraList.length;r++)s.cameraList[r].id===t&&(s.detail=s.cameraList[r]);s.playerOptions.sources[0].src=e.src,e.direct_type<5?(s.area_data={},s.people_dots=[],s.render_data=[],s.walk_list=[],s.clear_canvas(),s.car_sta="",s.data_inital(t),s.isReady&&s.data_inital(t),s.btn_sta.draw_btn=!0):(s.btn_sta.draw_btn=!1,s.car_sta="none",s.car_data=[],s.lane_list=[],s.exam_list=[],s.isReady&&(s.ctx.clearRect(0,0,s.c.width,s.c.height),s.sidewalklist()))}else s.$message({message:"网络错误",type:"warning"});case 14:case"end":return i.stop()}},i,s)}))()},handel_name:function(t){for(var e=0;e<t.length;e++)t[e].direct=t.direct_type,1===t[e].type?t[e].type_s="车道识别":t[e].type_s="人行道识别",1===t[e].direct_type?t[e].f_direct="东进口":2===t[e].direct_type?t[e].f_direct="西进口":3===t[e].direct_type?t[e].f_direct="南进口":4===t[e].direct_type?t[e].f_direct="北进口":5===t[e].direct_type?t[e].f_direct="东行人":6===t[e].direct_type?t[e].f_direct="西行人":7===t[e].direct_type?t[e].f_direct="南行人":8===t[e].direct_type&&(t[e].f_direct="北行人");this.cameraList.length>0&&this.camdetail(this.cameraList[0].id,this.cameraList[0],0)},data_inital:function(t){var e=this;this.$http({methods:"get",url:"lanelinelist/"+this.send_data.camera_id+"/"}).then(function(a){if(200===a.code){if(e.lane_list=a.data.laneline_list,e.lane_list.length>0){for(var s=0;s<e.lane_list.length;s++)e.lane_list[s].direct="车道线";e.draw_circle(),e.addlane(t)}}else e.$message({message:"网络错误",type:"warning"})})},addlane:function(t){var e=this;this.$http({methods:"get",url:"lanelist/"+t+"/"}).then(function(t){200===t.code?(e.car_data=t.data.lane_list,e.car_data.length>0&&e.updateScreen()):e.$message({message:"网络错误",type:"warning"})})},draw_circle:function(){for(var t=0;t<this.lane_list.length;t++)this.car_line(this.lane_list[t].dots_list)},updateScreen:function(){this.clear_canvas(),this.exam_list=[];for(var t=0;t<this.car_data.length;t++){this.car_data[t].dots_list=[],this.car_data[t].arr_line=this.car_data[t].lanes_info[0].name+"--"+this.car_data[t].lanes_info[1].name,this.car_data[t].width_m=this.car_data[t].width+"m",0===this.car_data[t].faceside?this.car_data[t].orien="---":1===this.car_data[t].faceside?this.car_data[t].orien="正向":2===this.car_data[t].faceside?this.car_data[t].orien="背向":this.car_data[t].orien="错误";for(var e=0;e<this.lane_list.length;e++)if(this.lane_list[e].name===this.car_data[t].lanes_info[0].name){for(var a=0;a<this.lane_list[e].dots_list.length-1;a++)this.car_data[t].dots_list.push(this.lane_list[e].dots_list[a]);for(var s=0;s<this.lane_list.length;s++)if(this.lane_list[s].name===this.car_data[t].lanes_info[1].name)for(var i=this.lane_list[s].dots_list.length-1;i>0;i--)this.car_data[t].dots_list.push(this.lane_list[s].dots_list[i])}this.car_line(this.car_data[t].dots_list,1);var n=this.car_data[t].dots_list.length;this.car_data[t].X=(this.car_data[t].dots_list[parseInt(3*n/4)][1]+this.car_data[t].dots_list[parseInt(n/4)][1])/2;var l=this.car_data[t].dots_list[parseInt(n/4)][0];this.car_data[t].Y=l,this.car_data[t].examline_info&&this.exam_list.push(this.car_data[t].examline_info)}if(this.exam_list.length>0)for(var r=0;r<this.exam_list.length;r++)this.car_line(this.exam_list[r].dots,2);else this.is_null.test=!1;if(this.exam_list.length>0)for(var c=0;c<this.car_data.length;c++)this.car_line(this.car_data[c].examline_info.dots[0],3,1),this.car_line(this.car_data[c].examline_info.dots[1],3,1),this.$set(this.car_data[c],"fontOrg","#FF6600")},addhandlaneline:function(t){this.x_draw=1;var e=this,a=document.getElementById("canvas"),s=a.getContext("2d");a.onclick=null;var i=[];a.onmousedown=function(n){1===e.x_draw&&(s.beginPath(),s.moveTo(n.offsetX,n.offsetY),a.onmousemove=function(n){s.lineTo(n.offsetX,n.offsetY),i.push([2*n.offsetY,2*n.offsetX]),s.strokeStyle=2===t?"#2A05E7":"transparent",s.stroke(),(n.offsetX<10||n.offsetY<10||n.offsetX>930||n.offsetY>510)&&(i.length>1&&2===t&&e.drawline(i),a.onmousemove=null,a.onmouseup=null,i=[])},a.onmouseup=function(){i.length<=1&&1===t?1===e.x_draw&&e.updateXY():i.length>1&&2===t&&e.drawline(i),a.onmousemove=null,a.onmouseup=null,i=[]})}},car_line:function(t,e,a){if(a)this.ctx.fillStyle="white",this.ctx.strokeStyle="rgba(255,255,255,1)",this.ctx.beginPath(),this.ctx.arc(t[1]/2,t[0]/2,4,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke();else{this.ctx.beginPath(),this.ctx.moveTo(t[0][1]/2,t[0][0]/2);for(var s=0;s<t.length;s++)this.ctx.lineTo(t[s][1]/2,t[s][0]/2);2===e?(this.ctx.setLineDash([100,1]),this.ctx.lineWidth=2,this.ctx.strokeStyle="#E82247"):1===e?(this.ctx.closePath(),this.ctx.strokeStyle="rgba(86,248,224,0.3)",this.ctx.fillStyle="rgba(86,248,224,0.3)",this.ctx.fill()):3===e?(this.ctx.setLineDash([10,25]),this.ctx.lineWidth=2,this.ctx.strokeStyle="#2A05E7"):(this.ctx.lineWidth=2,this.ctx.strokeStyle="#2A05E7"),this.ctx.stroke(),this.span_bimg=!0}},clear_canvas:function(){this.ctx.clearRect(0,0,this.c.width,this.c.height),this.lane_list.length>0&&this.draw_circle()},realXY:function(t){this.x=t.offsetX,this.y=t.offsetY;var e={};e.x=this.x,e.y=this.y;for(var a=0;a<this.lane_list.length;a++)for(var s=0;s<this.lane_list[a].dots_list.length;s++)e.y!==this.lane_list[a].dots_list[s].y&&e.x!==this.lane_list[a].dots_list[s].x||(this.lane_list[a].r_x=e.x,this.lane_list[a].r_y=e.y)},updateXY:function(){this.x=2*event.offsetX,this.y=2*event.offsetY,1===this.x_draw?this.drawline():3===this.x_draw?this.peoplexy(this.x,this.y):2===this.x_draw?this.examxy(this.x,this.y):4===this.x_draw&&this.resetwalk(this.x,this.y)},drawline:function(t){if(!0===this.btn_sta.generate);else{var e="车道线1";if(0===this.lane_list.length)e="车道线1";else{for(var a=[],s=0;s<this.lane_list.length;s++){var i=this.lane_list[s].name.substr(this.lane_list[s].name.length-1,1);i=parseInt(i),a.push(i)}for(var n=0;n<this.lane_list.length+1;n++)if(n>0){if(-1===a.indexOf(n)){e="车道线"+n;break}e="车道线"+(n+1)}}this.send_data.name=e}if(6===this.lane_list.length)return this.$message({message:"最多可配置6条车道线",type:"error"}),this.clear_canvas(),void this.data_inital(this.send_data.camera_id);t?this.line_request(t):this.dot_request()},dot_request:function(){var t=this;this.send_data.x_axis=this.x,this.send_data.y_axis=this.y,this.car_data.length>0?this.$confirm("车道已生成，再次绘制车道线将清除原车道，是否继续？","提示",{closeOnClickModal:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.apper(),t.exam_list=[]}).catch(function(){}):(this.apper(),this.exam_list=[]),this.x="",this.y=""},apper:function(){var t=this;this.$http({method:"post",url:"addlaneline/",data:this.send_data}).then(function(e){200===e.code&&(t.data_inital(t.send_data.camera_id),t.clear_canvas())})},line_request:function(t){var e=this;this.car_data.length>0?this.$confirm("车道已生成，再次绘制车道线将清除原车道，是否继续？","提示",{closeOnClickModal:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.sendLaneLine(t),e.exam_list=[],e.clear_canvas()}).catch(function(){e.clear_canvas(),e.data_inital(e.send_data.camera_id)}):(this.sendLaneLine(t),this.exam_list=[])},sendLaneLine:function(t){var e=this;this.send_data.dots=l()(t),this.$http({method:"post",url:"addhandlaneline/",data:this.send_data}).then(function(t){e.clear_canvas(),e.data_inital(e.send_data.camera_id)})},dellaneline:function(t,e){var a=this;this.car_data.length>0?this.$confirm("删除车道线后对应车道也将删除，是否继续？","删除车道线",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.delete_carline(t,e)}).catch(function(){}):this.$confirm("是否删除该车道线？","删除车道线",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.delete_carline(t,e),a.clear_canvas()}).catch(function(){}),this.x_draw=5},delete_carline:function(t,e){var a=this;this.$http({method:"delete",url:"dellaneline/"+e.id+"/"}).then(function(t){if(a.btn_sta.gen_drive=!1,200===t.code){for(var s=0;s<a.lane_list.length;s++)e.id===a.lane_list[s].id&&a.lane_list.splice(s,1);a.clear_canvas(),a.addlane(a.send_data.camera_id),a.lane_list.length<2&&(a.btn_sta.gen_drive=!0)}}),this.x_draw=1},btn_add:function(){var t=this;this.$http({methods:"get",url:"addlane/"+this.send_data.camera_id+"/"}).then(function(e){200===e.code&&t.addlane(t.send_data.camera_id),t.btn_sta.gen_drive=!0}),this.x_draw=5},server_arr:function(t){for(var e=0;e<this.lane_list.length;e++){for(var a=0;a<this.lane_list.length;a++)this.lane_list[a].name===t.lane_list[e].lanes_info[0].name&&(this.car_data[e].dots_list=[],this.car_data[e].dots_list.push(this.lane_list[a].dots_list));for(var s=0;s<this.lane_list.length;s++)this.lane_list[s].name===t.lane_list[e].lanes_info[1].name&&(this.car_data[e].dots_list=[],this.car_data[e].dots_list.push(this.lane_list[s].dots_list));this.q_car(t.lane_list[e].lanes_info)}},updata_cardata:function(){var t=this;this.$http({methods:"get",url:"lanelist/"+this.send_data.camera_id+"/"}).then(function(e){200===e.code&&(t.car_data=e.data.lane_list,t.updateScreen())})},dire:function(){for(var t=0;t<this.car_data.length;t++)this.car_data[t].arr_line=this.car_data.data.lane_list[t].lanes_info[0].name+"--"+this.car_data.data.lane_list[t].lanes_info[1].name,0===this.car_data[t].faceside?this.car_data[t].orien="---":1===this.car_data[t].faceside?this.car_data[t].orien="正向":2===this.car_data[t].faceside?this.car_data[t].orien="背向":this.car_data[t].orien="错误"},examxy:function(t,e){var a=this;return o()(c.a.mark(function s(){var i;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a.btn_sta.generate=!1,(i=[]).push(e),i.push(t),a.hightLight(i),a.last_arr.push(i),2!==a.last_arr.length){s.next=12;break}return a.car_area.dots=l()(a.last_arr),s.next=10,a.$http.post("addexamline/",a.car_area);case 10:200===s.sent.code&&(a.updata_cardata(a.car_area.dots),a.is_null.test=!0,a.is_null.test_name=!0,a.is_null.test_del=!0,a.last_arr=[],a.x_draw=5);case 12:case"end":return s.stop()}},s,a)}))()},hightLight:function(t){this.car_line(t,3,1)},del_detection:function(t){var e=this;return o()(c.a.mark(function a(){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$http({methods:"get",url:"delexamline/"+t.id+"/"}).then(function(a){if(200===a.code){for(var s=0;s<e.exam_list.length;s++)e.exam_list[s].id===t.id&&e.exam_list.splice(s,1);e.clear_canvas();for(var i=0;i<e.car_data.length;i++)e.car_line(e.car_data[i].dots_list,"1"),t.id===e.car_data[i].examline_info.id&&e.$set(e.car_data[i],"fontOrg","");for(var n=0;n<e.exam_list.length;n++)e.car_line(e.exam_list[n].dots,2)}});case 1:case"end":return a.stop()}},a,e)}))()},addexamline:function(t){var e=this;return o()(c.a.mark(function a(){var s;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.car_area.lane_id=t.id,e.car_area.camera_id=e.send_data.camera_id,s=t.name.substr(t.name.length-1,1),e.car_area.name="检测线"+s,e.is_null.test=!0,e.is_null.test_del=!0,e.x_draw=2,document.getElementById("canvas").onclick=function(t){e.updateXY()};case 9:case"end":return a.stop()}},a,e)}))()},scheme_edit:function(t,e){this.editFormVisible=!0,this.edit_data={};var a={};for(var s in e)a[s]=e[s];a.lane_id=e.id,this.edit_data=a,this.storage_data=JSON.parse(l()(this.edit_data)),this.chosePhase()},chosePhase:function(){var t=this;return o()(c.a.mark(function e(){var a,s,n,l,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("phaselist/");case 2:a=e.sent,s=a.code,n=a.data,200===s&&(l=n.phase_list,(r=l.filter(function(e){return 1===e.type&&-1!==e.phase_name.indexOf(t.detail.f_direct.substr(0,1))})).map(function(t,e){i()(t,{value:t.phase_name})}),t.options=r);case 5:case"end":return e.stop()}},e,t)}))()},editfixedplan:function(){var t=this;return o()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l()(t.storage_data)!==l()(t.edit_data)){e.next=2;break}return e.abrupt("return",t.$message.warning("内容未修改"));case 2:return e.next=4,t.$http.put("editlane/"+t.edit_data.id+"/",t.edit_data);case 4:a=e.sent,200===a.code&&(t.editFormVisible=!1,t.updata_cardata());case 7:case"end":return e.stop()}},e,t)}))()},people_line:function(){var t=this;return o()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=document.getElementById("canvas"),t.x_draw=3,a.onmousedown=null,t.x_draw=3,a.onclick=function(e){t.updateXY()},t.walk_list.length>0&&t.clear_canvas();case 6:case"end":return e.stop()}},e,t)}))()},peoplexy:function(t,e){0===this.people_dots.length?(this.area_data.xl=t-4,this.area_data.xr=t+4,this.area_data.yt=e-4,this.area_data.yb=e+4,this.peopleHeightLight(t,e)):this.people_dots.length>2?this.isBelongRender(t,e):this.isBelongBefore(t,e)},isBelongRender:function(t,e){var a=this;return o()(c.a.mark(function s(){var i,n;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(Math.abs(a.area_data.xl+4-t)<=20&&Math.abs(a.area_data.yt+4-e)<=20)){s.next=23;break}return(i={}).walk_dots=JSON.parse(l()(a.people_dots)),n=a.people_dots[a.people_dots.length-1][0],i.walk_dots[i.walk_dots.length-1][0]=i.walk_dots[i.walk_dots.length-1][1],i.walk_dots[i.walk_dots.length-1][1]=n,i.walk_dots=l()(i.walk_dots),i.camera_id=a.detail.id,i.name="人行道",i.examline_dots=l()([[424,848],[322,1560]]),i.examline_name="人行道检测线",s.next=14,a.$http.post("addsidewalk/",i);case 14:if(200!==s.sent.code){s.next=21;break}return s.next=18,a.$http({methods:"get",url:"delsidewalk/",params:{sidewalk_id:a.walk_list[0].id}});case 18:a.peopleLineName="重置人行道",a.sidewalklist(),a.people_dots=[];case 21:s.next=24;break;case 23:a.isBelongBefore(t,e);case 24:case"end":return s.stop()}},s,a)}))()},isBelongBefore:function(t,e){var a=[];this.render_data.filter(function(s){t>=s.xl&&t<=s.xr&&e>=s.yt&&e<=s.yb&&a.push(s)}),0===a.length&&this.peopleHeightLight(t,e)},peopleHeightLight:function(t,e){if(this.people_dots.length>0){var a=this.people_dots[this.people_dots.length-1];a.reverse(),this.car_line([a,[e,t]],3)}this.car_line([e,t],3,1),this.people_dots.push([t,e]);var s={};s.xl=t-4,s.xr=t+4,s.yt=e-4,s.yb=e+4,this.render_data.push(s)},sidewalklist:function(){var t=this;return o()(c.a.mark(function e(){var a,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return{}.camera_id=t.detail.id,e.next=4,t.$http({methods:"get",url:"sidewalklist/",params:{camera_id:t.detail.id}});case 4:200===(a=e.sent).code&&(t.walk_list=a.data.walk_list,t.clear_canvas(),t.walk_list.length>0?(t.btn_sta.canvas="default",t.btn_sta.can_div="none",t.peopleLineName="重置人行道",t.car_line(t.walk_list[0].dots,1),""!==t.walk_list[0].examline_info&&(s=t.walk_list[0].examline_info.dots[1],i=t.walk_list[0].examline_info.dots[0],t.car_line([s,i],2),t.car_line(t.walk_list[0].examline_info.dots[0],3,1),t.car_line(t.walk_list[0].examline_info.dots[1],3,1))):(t.area_data={},t.people_dots=[],t.render_data=[],t.walk_list=[],t.peopleLineName="人行道配置"));case 6:case"end":return e.stop()}},e,t)}))()},addexamwalkline:function(t){var e=this;this.x_draw=4,this.walk_area=t,document.getElementById("canvas").onclick=function(t){e.updateXY()}},resetwalk:function(t,e){var a=this;return o()(c.a.mark(function s(){var i;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if((i=[]).push(e),i.push(t),a.hightLight(i),a.last_arr.push(i),2!==a.last_arr.length){s.next=13;break}return a.walk_area.name="检测线",a.walk_area.sidewalk_id=a.walk_area.id,a.walk_area.dots=l()(a.last_arr),s.next=11,a.$http.post("addwalkexamline/",a.walk_area);case 11:200===s.sent.code&&(a.sidewalklist(),a.last_arr=[]);case 13:case"end":return s.stop()}},s,a)}))()},del_line:function(t){var e=this;return o()(c.a.mark(function a(){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http({methods:"get",url:"delsidewalk/",params:{sidewalk_id:t.id}});case 2:200===a.sent.code&&e.sidewalklist();case 4:case"end":return a.stop()}},a,e)}))()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"car_edit"},[a("em",[t._v("道路区域配置")]),t._v(" "),a("div",{staticClass:"header"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("div",{staticClass:"tag-group"},t._l(t.cameraList,function(e,s){return a("el-button",{key:s,class:t.t_active&&t.cameraIndex===s?"b_org":"",attrs:{effect:"plain"},on:{click:function(a){return t.camdetail(e.id,e,s)}}},[t._v(t._s(e.f_direct)+"\n            ")])}),1)])])],1)],1),t._v(" "),a("div",{staticClass:"main"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"device"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"little_tit"},[t._v("设备信息")])]),t._v(" "),a("div",{staticClass:"info_device"},[a("span",[t._v("路口名称："+t._s(t.cross_name))]),t._v(" "),a("span",[t._v("摄像头状态：\n                "+t._s(1===t.detail.status?"正常":3===t.detail.status?"故障":4===t.detail.status?"未连接":"故障、正常以外的状态")+"\n                "),a("i",{class:1===t.detail.status?"el-icon-success green":"el-icon-error dang"})]),t._v(" "),a("span",{staticStyle:{"padding-left":"0"}},[t._v("方向："+t._s(t.detail.f_direct))]),t._v(" "),a("span",[t._v("摄像头编号："+t._s(t.detail.camera_num))]),t._v(" "),a("span",[t._v("设备型号："+t._s(t.detail.model))]),t._v(" "),a("span",[t._v("道路类别："+t._s(t.detail.type_s))])])])],1),t._v(" "),a("div",{staticClass:"car_config"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix"},[a("span",{staticClass:"little_tit"},[t._v(t._s("车道识别"==t.detail.type_s?"车道线配置":"人行道配置"))]),t._v(" "),t.btn_sta.draw_btn?a("el-button",{attrs:{type:"primary",disabled:t.btn_sta.generate},on:{click:function(e){return t.addhandlaneline(2)}}},[t._v("绘制车道线")]):t._e(),t._v(" "),"车道识别"!=t.detail.type_s?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.people_line()}}},[t._v(t._s(t.peopleLineName))]):t._e()],1)])],1),t._v(" "),a("div",{staticClass:"box2",staticStyle:{"background-color":"#fff"}},[a("div",{staticClass:"car_video",style:{"pointer-events":t.btn_sta.can_div,cursor:t.btn_sta.canvas},attrs:{id:"car_video"}},[a("div",{staticClass:"realvideo"},[a("videoPlayer",{staticClass:"vjs-custom-skin videoPlayer vjs-big-play-centered",style:{"pointer-events":t.btn_sta.can_div,cursor:t.btn_sta.canvas},attrs:{controls:"",preload:"auto",options:t.playerOptions},on:{play:function(e){return t.onPlayerPlay(e)}}})],1),t._v(" "),a("canvas",{directives:[{name:"show",rawName:"v-show",value:t.isReady,expression:"isReady"}],staticClass:"line",style:{cursor:t.btn_sta.canvas,"pointer-events":t.btn_sta.can_div},attrs:{id:"canvas",width:"960",height:"540"}}),t._v(" "),t.is_null.car?a("div",t._l(t.car_data,function(e,s){return a("div",{key:"lane_"+s,staticClass:"car_dao"},[t.is_null.car_name?a("div",{staticClass:"b_imgr",staticStyle:{"z-index":"999"},style:{marginLeft:e.X/2+"px",marginTop:e.Y/2+"px"}},[t._v("\n                    "+t._s(e.name)+"\n                  ")]):t._e()])}),0):t._e(),t._v(" "),t.is_null.test?a("div",t._l(t.exam_list,function(e,s){return a("div",{key:s,staticClass:"car_dao"},[t.is_null.test_name?a("div",{staticClass:"b_imgr",staticStyle:{"z-index":"999"},style:{marginLeft:parseInt((e.dots[0][1]+e.dots[1][1])/2)/2+"px",marginTop:parseInt((e.dots[0][0]+e.dots[1][0])/2)/2-40+"px"}},[t._v("\n                    "+t._s(e.name)+"\n                  ")]):t._e()])}),0):t._e(),t._v(" "),t.is_null.car_line?a("div",t._l(t.lane_list,function(e,s){return a("div",{key:"car_line_"+e.id,staticClass:"tip_msg",staticStyle:{left:"20px","z-index":"999"}},[t.is_null.car_line_name?a("div",{staticClass:"b_img",staticStyle:{"z-index":"999"},style:{marginLeft:e.dots_list[0][1]/2-58+"px",marginTop:e.dots_list[0][0]/2-34+"px"}},[t._v("\n                    "+t._s(e.name)+"\n                  ")]):t._e(),t._v(" "),t.is_null.car_line_del?a("div",{staticClass:"errx",style:{marginLeft:e.dots_list[0][1]/2-9+"px",marginTop:e.dots_list[0][0]/2-9+"px",display:t.btn_sta.x_red},on:{click:function(a){return t.del_ico(s,e)}}}):t._e()])}),0):t._e()])]),t._v(" "),a("el-card",[t.is_null.car_line?a("div",{staticClass:"line_card"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.lane_list,"default-sort":{prop:"create_at",order:"ascending"},"header-cell-class-name":t.font_style,"cell-class-name":t.font_style}},[a("el-table-column",{attrs:{type:"index",label:"序号","show-overflow-tooltip":"",width:"180",index:t.indexMethod(1)}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"direct",label:"类型","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.dellaneline(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,4135596930)})],1)],1):t._e()]),t._v(" "),a("div",{staticClass:"car_lineconfig",style:{display:t.car_sta}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"little_tit"},[t._v("车道配置")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.btn_sta.gen_drive},on:{click:function(e){return t.btn_add()}}},[t._v("生成车道")])],1),t._v(" "),a("div",{staticClass:"line_card"},[t.is_null.car?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.car_data,"header-cell-class-name":t.font_style,"cell-class-name":t.font_style}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180","show-overflow-tooltip":"",index:t.indexMethod(1)}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"arr_line",label:"车道线","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"orien",label:"类型","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"direct",label:"方向","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"width_m",label:"宽度","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_at",label:"更新时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.addexamline(e.row)}}},[a("span",{style:{color:e.row.fontOrg}},[t._v("重置检测线")])]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.scheme_edit(e.$index,e.row)}}},[t._v("\n                      编辑\n                    ")]),t._v(" "),a("el-dialog",{staticClass:"add_stage",attrs:{align:"left",title:"编辑车道",width:"500px","close-on-click-modal":!1,visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-row",{staticClass:"add_plan"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple scheme_light"},[t._v("\n                              名称\n                            ")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{maxlength:"30",autocomplete:"off"},model:{value:t.edit_data.name,callback:function(e){t.$set(t.edit_data,"name",e)},expression:"edit_data.name"}})],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple scheme_light"},[t._v("\n                              类型\n                            ")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.edit_data.faceside,callback:function(e){t.$set(t.edit_data,"faceside",e)},expression:"edit_data.faceside"}},t._l(t.type_options,function(t){return a("el-option",{key:"type_"+t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple scheme_light"},[t._v("\n                              方向选择\n                            ")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.edit_data.direct,callback:function(e){t.$set(t.edit_data,"direct",e)},expression:"edit_data.direct"}},t._l(t.options,function(t){return a("el-option",{key:"phase_"+t.value,attrs:{label:t.value,value:t.value}})}),1)],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple scheme_light"},[t._v("\n                              宽度\n                            ")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{staticStyle:{width:"90%"},attrs:{maxlength:"5",autocomplete:"off"},model:{value:t.edit_data.width,callback:function(e){t.$set(t.edit_data,"width",e)},expression:"edit_data.width"}}),t._v("  m\n                            ")],1)])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer add_btn",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"definite_btn",on:{click:t.editfixedplan}},[t._v("确 定")])],1)],1)]}}],null,!1,2628125994)})],1):t._e()],1)])],1),t._v(" "),a("div",{staticClass:"walk_list",style:{display:t.walk_list.length>0?"":"none"}},[a("div",{staticClass:"line_card"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.walk_list,"header-cell-class-name":t.font_style,"cell-class-name":t.font_style}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180",index:t.indexMethod(1)}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"操作时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_at",label:"更新时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.addexamwalkline(e.row)}}},[a("span",{staticStyle:{color:"#FF6600"}},[t._v("重置检测线")])])]}}])})],1)],1)])],1)],1)],1)])},staticRenderFns:[]};var p=a("VU/8")(h,u,!1,function(t){a("r6yl"),a("H3bK")},"data-v-1eb68166",null);e.default=p.exports},r6yl:function(t,e){}});